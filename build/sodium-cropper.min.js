if("undefined"==typeof jQuery)throw new Error("Please ensure jQuery is loaded before this.");!function(e){e.fn.sodiumCropper=function(r){"use strict";!e.fn.Cropper;var i=!0;window.FileReader||(i=!1,console.error("Sodium Cropper: FileReader is currently a requirement of this plugin (IE9+), backwards-compatibility may be added later."));var t=e.extend({},{prefix:"",placeholder:!1,elements:{select:".select",remove:".remove",preview:".preview",fileInput:".file-input",fileLabel:".file-label"},cropper:{aspectRatio:16/9,responsive:!0,movable:!1,zoomable:!0,rotatable:!1,scalable:!1}},r);return this.each(function(){var r=e(this),i=t;r.attr("data-config")&&(i=e.extend({},t,r.data("config"))),console.log(i);var n=r.find(i.elements.remove),a=r.find(i.elements.preview),p=r.find(i.elements.fileInput),o=r.find(i.elements.fileLabel),s=o.text();r.append('<input type="hidden" name="'+i.prefix+'[coordinates][x]">'),r.append('<input type="hidden" name="'+i.prefix+'[coordinates][y]">'),r.append('<input type="hidden" name="'+i.prefix+'[coordinates][w]">'),r.append('<input type="hidden" name="'+i.prefix+'[coordinates][h]">');var d=r.find('input[name="'+i.prefix+'[coordinates][x]"]'),l=r.find('input[name="'+i.prefix+'[coordinates][y]"]'),c=r.find('input[name="'+i.prefix+'[coordinates][w]"]'),f=r.find('input[name="'+i.prefix+'[coordinates][h]"]');p.on("change",function(t){if(a.attr("src",""),a.hasClass("is-cropper")&&(a.cropper("destroy"),a.removeClass("is-cropper"),o.text(s)),i.placeholder&&a.attr("src",i.placeholder),this.files&&this.files[0]){o.text(this.files[0].name);var u=new FileReader;u.onload=function(r){a.attr("src",r.target.result);var t=e.extend(i.cropper,{crop:function(e){d.val(e.x),l.val(e.y),c.val(e.width),f.val(e.height)}});a.cropper(t),a.addClass("is-cropper"),n.show()},u.readAsDataURL(this.files[0])}r.find('input[type="hidden"][name="'+i.prefix+'"]').remove(),p.attr("name",i.prefix)}),n.on("click",function(t){t.preventDefault(),a.attr("src",""),a.hasClass("is-cropper")&&(a.cropper("destroy"),a.removeClass("is-cropper")),i.placeholder&&a.attr("src",i.placeholder),o.text(s),d.val(""),l.val(""),c.val(""),f.val(""),p.val(""),p.removeAttr("name"),r.prepend('<input type="hidden" name="'+i.prefix+'">'),e(this).hide()})})}}(jQuery);