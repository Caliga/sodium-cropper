if("undefined"==typeof jQuery)throw new Error("Please ensure jQuery is loaded before this.");!function(e){e.fn.sodiumCropper=function(r){"use strict";!e.fn.Cropper;var i=!0;window.FileReader||(i=!1,console.error("Sodium Cropper: FileReader is currently a requirement of this plugin (IE9+), backwards-compatibility may be added later."));var t=e.extend({prefix:"",placeholder:!1,elements:{select:".select",remove:".remove",preview:".preview",fileInput:".file-input",fileLabel:".file-label"},cropper:{aspectRatio:16/9,responsive:!0,movable:!1,zoomable:!0,rotatable:!1,scalable:!1}},r);return this.each(function(){var r=e(this),i=t;r.attr("data-config")&&(i=e.extend(t,r.data("config")));var a=r.find(i.elements.remove),n=r.find(i.elements.preview),p=r.find(i.elements.fileInput),l=r.find(i.elements.fileLabel),s=l.text();r.append('<input type="hidden" name="'+i.prefix+'_x">'),r.append('<input type="hidden" name="'+i.prefix+'_y">'),r.append('<input type="hidden" name="'+i.prefix+'_w">'),r.append('<input type="hidden" name="'+i.prefix+'_h">');var o=r.find('input[name="'+i.prefix+'_x"]'),d=r.find('input[name="'+i.prefix+'_y"]'),f=r.find('input[name="'+i.prefix+'_w"]'),c=r.find('input[name="'+i.prefix+'_h"]');p.on("change",function(r){if(n.attr("src",""),n.hasClass("is-cropper")&&(n.cropper("destroy"),n.removeClass("is-cropper"),l.text(s)),i.placeholder&&n.attr("src",i.placeholder),this.files&&this.files[0]){l.text(this.files[0].name);var t=new FileReader;t.onload=function(r){n.attr("src",r.target.result);var t=e.extend(i.cropper,{crop:function(e){o.val(e.x),d.val(e.y),f.val(e.width),c.val(e.height)}});n.cropper(t),n.addClass("is-cropper"),a.show()},t.readAsDataURL(this.files[0])}}),a.on("click",function(r){r.preventDefault(),n.attr("src",""),n.hasClass("is-cropper")&&(n.cropper("destroy"),n.removeClass("is-cropper")),i.placeholder&&n.attr("src",i.placeholder),l.text(s),o.val(""),d.val(""),f.val(""),c.val(""),p.val(""),e(this).hide()})})}}(jQuery);